<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <f:facet name="last">
            <h:outputStylesheet library="css" name="animation.css"  />
            <h:outputStylesheet library="css" name="bootstrap.css"  />
            <h:outputStylesheet library="css" name="projeto.css"  />            
            <h:outputStylesheet library="css" name="font-awesome.min.css"/>
            <h:outputStylesheet library="css" name="ns-default.css"/>
            <h:outputStylesheet library="css" name="ns-style-growl.css"/>
        </f:facet>

        <h:outputScript library="js" name="jquery-2.2.2.min.js" />     
        <h:outputScript library="js" name="bootstrap-3.3.6.min.js"/>            
        <h:outputScript library="js" name="bootstrap.js" /> 
        <h:outputScript library="js" name="mensagemFeedBack.js" />

        <script>
            function exibeMensagem(){
                var mensagem = document.getElementById("notificacaoSalvo");
                mensagem.setAttribute("class","ns-box ns-growl notSalvo ns-type-notice ns-show animated");
            }
        </script>
        
        <title>Verificação de e-mail</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>
    <h:body onload="funcaoAjaxSalvoPrimeFaces()">

        <main>
            <!-- Notificação para reenvio de email de confirmação de cadastro (gamb by pedro). -->
            <h:panelGroup layout="block" id="mensagemSalvamento">
                <!--ns-box ns-growl notSalvo ns-type-notice ns-show animated -->
                <h:panelGroup id="notificacaoSalvo" layout="block" style="position: fixed; left: 40%;" class="invisivel">
                    <div>
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                        <p style="padding-left: 15%; margin-top: -17%;">O e-mail foi reenviado com sucesso!</p>
                        <span id="closeFeedBack" class="ns-close" onclick="fecharMensagemFeedBackSalvo();"></span>
                    </div>
                </h:panelGroup>
            </h:panelGroup>
            <!-- Fim Notificação Plano salvo com sucesso. -->
            
            <!-- Notificação para atualização e reenvio de email de confirmação de cadastro (gamb by pedro). -->
                <h:panelGroup layout="block" id="mensagemErroSubmissao">
                    <ui:repeat value="#{facesContext.getMessageList('formReenviaEmail:linkEmail')}" var="message">
                        <h:panelGroup id="notificacaoErroSubmissao" layout="block" style="position: fixed; left: 40%;" class="ns-box ns-growl notSalvo ns-type-notice ns-show animated">
                            <div>
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                                <h:message style="padding-left: 15%; margin-top: -17%;" for="formReenviaEmail:linkEmail"/>
                                <span id="closeFeedBack" class="ns-close" onclick="fecharMensagemFeedBackSalvo();"></span>
                            </div>
                        </h:panelGroup>
                    </ui:repeat>
                </h:panelGroup>

                <!-- Fim Notificação erro ao submeter.. -->
            
            <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
 
            <p:dialog style="margin-left: 40%; margin-top: 20%" widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                <h:graphicImage library="images" 
                                    name="ajax-loader6.gif" 
                                    alt="Carregando"/>
            </p:dialog>
            <br/><br/><br/>
            <div class="paginaErro well">


                <h2>
                    <p>Verificação de e-mail</p>
                </h2>
                <br/>
                <p>Olá <strong><h:outputText value="#{empreendedorBean.empreendedor.nome}"></h:outputText></strong>, um e-mail contendo instruções para confirmação foi enviado para <strong><h:outputText value="#{empreendedorBean.empreendedor.email}"></h:outputText></strong>. <br/>Siga essas instruções e nós confirmaremos o seu e-mail.</p>
                <br/>
                    <div class="col-md-3"></div>
                    <div class="col-md-6"><hr></hr></div>
                    <div class="col-md-2"></div>
                    <br/>
                <h:form id="formConfirmaEmail">
                    
                    

                    <div class="col-md-12" style="padding-left: 35%; text-align: left" >
                        <p> <strong><h:outputText value="#{empreendedorBean.empreendedor.email}"></h:outputText></strong> <strong>não</strong> é o seu e-mail? Você pode altera-lo logo abaixo.</p>
                        <div class="col-md-5">
                            
                            <p:inputText id="email" placeholder="email@email.com" class="form-control" style="padding: 10px 18px;"
                                         value="#{empreendedorBean.email}"
                                         required="true"
                                         requiredMessage="Insira o email para atualizar"
                                         validatorMessage="Email Invalido">
                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                            </p:inputText>
                            <h:message class="mensagemErro" for="email"/>
                        </div>
                        <div class="col-md-2">
                            <p:commandButton id="botaoAtualizarEmail" 
                                             class="botaoBase botaoAzul" 
                                             title="Atualizar o seu e-mail" 
                                             value="Atualizar" 
                                             action="#{empreendedorBean.atualizaEmail()}" 
                                             onclick="PF('statusDialog').show()"                                             
                                             ajax="false"> 
                            </p:commandButton>
                        </div>
                    </div>
                </h:form>

                <h:form id="formReenviaEmail">
                   
                    <div class="col-md-12">
                        
                        <br/>
                        <br/><p> Caso você ainda não tenha recebido o e-mail é possível reenviar clicando 
                            <p:commandLink  id="linkEmail" update=":formReenviaEmail formConfirmaEmail" action="#{empreendedorBean.reenviaEmail()}" onsuccess="exibeMensagem(),funcaoAjaxSalvoPrimeFaces()">aqui
                            </p:commandLink>.</p>
                       
                        <br/><br/>
                    </div>
                    <div>

                        <p:button id="botaoLogin"
                            class="botaoBase botaoVerde"
                            title="Redireciona para a página de login."
                            value="Acesse sua conta"                            
                            outcome="loginEmpreendedor.jsf"
                            icon="fa fa-sign-out"
                            >
                            
                        </p:button>
                    </div>
                </h:form>
            </div>
        </main>

        <!-- Início do footer profissional em HTML5+CCS3  -->
        <footer class="rodapePaginaErro">
            <nav>
                <hr></hr>
                <p>
                    <small>Copyright © 2015-2016 </small> - <strong> Ideiah Soluções em Software</strong>
                </p>
                <hr></hr>
            </nav>
        </footer>
        <!-- Fim do footer profissional em HTML5+CCS3  -->
    </h:body>
</html>
